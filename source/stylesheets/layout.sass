\:root

  --primary-font: #{"{{ theme.primary_font | font_family }}"}
  --secondary-font: #{"{{ theme.secondary_font | font_family }}"}

  --border-color: #{'rgba(var(--text-color-rgb), .5)'}
  --mobile-nav-border-color: #{'rgba(var(--text-color-rgb), .2)'}
  --background-color: #{'{{ theme.background_color }}'}
  --header-logo-image-size-numeric: #{"{{ theme.header_logo_image_size }}"}
  --header-background: #{'{{ theme.header_background_color }}'}
  --header-text-color: #{'{{ theme.header_text_color }}'}
  --text-color: #{'{{ theme.text_color }}'}
  --secondary-text-color: #{'{{ theme.secondary_text_color }}'}
  --hover-color: #{'{{ theme.link_hover_color }}'}
  --button-text-color: #{'{{ theme.button_text_color }}'}
  --button-background-color: #{'{{ theme.button_background_color }}'}
  --button-background-hover-color: #{'{{ theme.button_background_hover_color }}'}
  --product-status-text-color: #{"{{ theme.product_status_text_color }}"}
  --product-status-text-color-secondary: #{"{{ theme.product_status_text_color_secondary }}"}
  --inventory-status-text-color: #{"{{ theme.inventory_status_text_color }}"}
  --announcement-text-color: #{"{{ theme.announcement_text_color }}"}
  --announcement-background-color: #{"{{ theme.announcement_background_color }}"}
  --scroll-duration: #{"{{ theme.announcement_scroll_speed | default: '15s' }}"}
  --error-background-color: #950f1e
  --error-text-color: #FFFFFF

  --border-radius: #{'{{ theme.border_radius }}'}
  --font-scale: #{'{{ theme.global_text_scale | default: 1 }}'}
  --shop-name-scale: #{'{{ theme.shop_name_text_scale | default: 1 }}'}
  --product-grid-scale: #{'{{ theme.product_grid_scale | default: 1 }}'}
  --product-title-scale: #{'{{ theme.product_page_heading_scale | default: 1 }}'}
  --product-description-scale: #{'{{ theme.product_page_description_scale | default: 1 }}'}
  --header-text-scale: #{'{{ theme.header_text_scale | default: 1 }}'}
  --footer-text-scale: #{'{{ theme.footer_text_scale | default: 1 }}'}

  // Video player customization
  --video-rounded-radius: var(--border-radius)
  --video-size-small: 500px
  --video-size-medium: 720px
  --video-size-large: 100%
  --video-margin-small: 16px
  --video-margin-large: 48px
  --video-container-padding: 0
  --video-mobile-breakpoint: #{$break-large}
  --video-mobile-padding: 16px

html
  height: 100%
  min-height: 100%
  position: relative
  font-size: calc(16px * var(--font-scale, 1))

body
  height: 100%
  min-height: 100%
  position: relative
  +flexbox
  +flex-direction(column)
  -moz-osx-font-smoothing: grayscale
  -webkit-font-smoothing: antialiased
  background-color: var(--background-color)
  color: var(--text-color)
  font-family: var(--secondary-font)
  font-size: calc(1rem * var(--font-scale, 1))
  width: 100%

  @media screen and (max-width: $break-medium)
    &.show_menu
      overflow: hidden
      position: fixed

      &:after
        content: ""
        position: fixed
        height: 100vh
        width: 100vw
        background: var(--background-color)
        display: block
        opacity: .5
        z-index: 1
        left: 0
        top: 0


a
  color: var(--text-color)
  text-decoration: none

  &:hover, &:focus
    color: var(--hover-color)

  &:hover
    text-decoration: none

h1, h2, h3, h4, h5, h6
  font-family: var(--primary-font)
  font-weight: 500
  line-height: 1.25
  margin: 0
  padding: 0

h1
  font-size: 1.75em
  margin-bottom: 32px

  @media screen and (max-width: $break-small)
    font-size: 1.5em

.mobile_nav
  +align-items(center)
  +justify-content(flex-start)
  +flex-shrink(0)
  background-color: var(--background-color)
  border-bottom: 1px solid var(--mobile-nav-border-color)
  display: none
  height: 60px
  padding: 0 16px
  width: 100%
  font-size: calc(1rem * var(--header-text-scale, 1))

  *
    text-transform: #{"{{ theme.nav_text_transform_header }}"}

  @media only screen and (max-width: $break-large)
    +flexbox
    z-index: 11

  button.open_menu
    +transition(.1s ease-in-out)
    display: flex
    align-items: center
    justify-content: center
    height: 40px
    margin-left: -10px
    position: relative
    width: 40px

    .hamburger-container
      width: 22px
      height: 14px
      position: relative

    span
      border-radius: var(--border-radius)
      +transform(rotate(0deg))
      +transition(.1s ease-in-out)
      display: block
      background: var(--text-color)
      width: 100%
      height: 2px
      position: absolute
      left: 0
      opacity: 1

      &:nth-child(1)
        top: 0px

      &:nth-child(2), &:nth-child(3)
        top: 50%

      &:nth-child(4)
        top: 99%

    &.open
      span
        &:nth-child(1)
          top: 18px
          width: 0%
          left: 50%

        &:nth-child(2)
          +transform(rotate(45deg))

        &:nth-child(3)
          +transform(rotate(-45deg))

        &:nth-child(4)
          top: 18px
          width: 0%
          left: 50%


  &:hover, &:focus
    .line-1
      +transform(translateY(-2px))

    .line3
      +transform(translateY(2px))

  .mobile_cart
    +flexbox
    +align-items(center)
    margin-left: auto
    gap: 4px

    .cart_icon
      margin-right: 6px
      height: 22px
      width: 22px

.wrap
  +flex(1)
  margin: 0 auto
  max-width: 1300px
  padding: 0 24px 80px
  width: 100%
  display: grid
  grid-column-gap: 60px
  grid-row-gap: 30px

  // Grid inherits flexbit `min-width: auto` which can introduce issues.
  // Reference: https://daverupert.com/2017/09/breaking-the-grid/
  > *
    min-width: 0

  &.left-sidebar
    @media screen and (min-width: $break-large + 1)
      grid-template-columns: 220px 1fr
      grid-template-areas: "sidebar content"

  &.right-sidebar
    @media screen and (min-width: $break-large + 1)
      grid-template-columns: 1fr 220px
      grid-template-areas: "content sidebar"

  @media screen and (max-width: $break-large)
    padding-bottom: 40px
    grid-template-columns: 1fr
    grid-template-areas: "content" "sidebar"

a.skip-link
  +transition(all .3s)
  background: var(--background-color)
  border: 1px solid var(--text-color)
  color: var(--text-color)
  left: 25px
  padding: 12px 24px
  position: absolute
  text-decoration: underline
  top: -150px
  z-index: 100

  &:focus
    top: 20px

header
  background: var(--header-background)
  font-family: var(--primary-font)
  +global-font-size(28px)
  padding: 48px 0
  margin-bottom: 32px
  text-align: center

  @media only screen and (max-width: $break-large)
    margin: 0 0 40px
    padding: 32px 24px

  .inner-wrapper
    padding: 0 16px
    +justify-content(#{"{{ theme.header_position }}"})

    @media screen and (max-width: $break-medium)
      +justify-content(center)
      padding: 0

.store_header
  color: var(--header-text-color)
  display: inline-block
  font-size: 44px
  font-size: calc(44px * var(--shop-name-scale, 1) * var(--header-text-scale, 1))

  @media screen and (max-width: $break-medium)
    font-size: 32px
    font-size: calc(32px * var(--shop-name-scale, 1) * var(--header-text-scale, 1))

  &.text
    display: inline-block
    line-height: 1.2em
    text-decoration: none
    white-space: normal
    word-break: break-word
  
  .logo
    display: inline-flex
    align-items: center
    line-height: 0

// Logo image styling
.store-image
  display: block
  object-fit: contain
  width: auto
  // Desktop: force height to theme setting, width scales proportionally
  height: calc(var(--header-logo-image-size-numeric) * 1px)

  // Tablet: responsive scaling maintains proportional sizing
  @media screen and (max-width: $break-medium)
    height: calc(var(--header-logo-image-size-numeric) * 0.8 * 1px)

  // Mobile: smaller size for comfortable mobile header
  @media screen and (max-width: $break-small)
    height: calc(var(--header-logo-image-size-numeric) * 0.65 * 1px)

  // Extra small: reasonable bounds with minimum/maximum constraints
  @media screen and (max-width: $break-extra-small)
    height: clamp(60px, calc(var(--header-logo-image-size-numeric) * 0.5 * 1px), 150px)


.hidden
  display: none

.content
  +pie-clearfix
  position: relative
  grid-area: content
  min-height: 600px

.custom_content
  font-family: var(--secondary-font)
  margin: 0 #{"{% if theme.sidebar_position == 'right' %} auto {% endif %}"}
  max-width: 700px
  width: 100%

.custom-page-content

  p
    margin: revert

  &>:first-child
    margin-top: 0

  &>:last-child
    margin-bottom: 0

  ol, ul
    padding-left: 1.5em
    margin: 1em 0

    ol, ul
      margin: 0.5em 0

  ul
    list-style: disc

  ol
    list-style: decimal

  a
    color: var(--secondary-text-color)
    text-decoration: underline
    text-underline-offset: 4px

    &:hover
      color: var(--hover-color)

  img
    display: inline-block
    margin: 0 auto
    max-width: 100%
    margin-bottom: 16px

  iframe
    display: block
    margin: 0 auto
    max-width: 100%
    margin-bottom: 16px

.sidebar-navigation
  background-color: var(--background-color)
  padding-bottom: 40px
  grid-area: sidebar
  font-size: calc(1rem * var(--header-text-scale, 1))

  *
    text-transform: #{"{{ theme.nav_text_transform_header }}"}

  @media only screen and (max-width: $break-large)
    left: 0
    padding: 20px
    position: absolute
    top: var(--header-bottom-position,60px)
    width: 100%
    z-index: 10
    overflow: scroll
    height: calc(100vh - var(--header-bottom-position))
    height: calc(100svh - var(--header-bottom-position))
    width: calc(100vw - 5rem)
    min-width: 400px
    transform: translateX(-100%)
    opacity: 0
    visibility: hidden
    transition: transform .2s
    padding-bottom: 60px
    border-right: 1px solid var(--mobile-nav-border-color)

    &.open
      opacity: 1
      visibility: visible
      transform: translateX(0)

  .nav_title
    border-bottom: 1px solid var(--border-color)
    font-family: var(--primary-font)
    +global-font-size(22px)
    font-size: calc(22px * var(--font-scale, 1) * var(--header-text-scale, 1))
    line-height: 1.3em
    margin-bottom: 4px
    padding: 0 0 6px

  .side_cart
    +flexbox
    +align-items(center)
    +justify-content(flex-start)
    +transition(background .2s ease, color .2s ease, border .2s ease)
    border-radius: var(--border-radius)
    gap: 8px
    background-color: var(--background-color)
    border: 1px solid var(--secondary-text-color)
    color: var(--secondary-text-color)
    font-family: var(--secondary-font)
    margin-bottom: 40px
    padding: 12px
    position: relative
    text-decoration: none !important

    @media only screen and (max-width: $break-extra-large)
      +global-font-size(15px)
      font-size: calc(15px * var(--font-scale, 1) * var(--header-text-scale, 1))

    @media only screen and (max-width: $break-large)
      display: none

    .cart_numbers
      margin-left: auto

    .cart_icon
      fill: currentColor
      flex-shrink: 0
      height: 22px
      width: 22px

    &:hover, &:focus, &:active
      background-color: var(--button-background-color)
      border: 1px solid var(--button-background-color)
      color: var(--button-text-color)

  ul
    display: flex
    flex-direction: column
    gap: 6px
    list-style: none
    margin: 0
    padding: 0

    li
      &:first-child
        margin-top: 4px

    a, button
      color: var(--secondary-text-color)
      display: block
      padding: 4px 0
      height: auto
      border-radius: 0
      line-height: 1.25em
      text-align: left
      width: 100%

      &:hover, &:focus
        color: var(--hover-color)

      &:hover
        text-decoration: none

      &:focus
        outline-offset: 2px

      @media screen and (max-width: $break-large)
        +global-font-size(18px)
        font-size: calc(18px * var(--font-scale, 1) * var(--header-text-scale, 1))

  nav > div
    margin-bottom: 24px

    &:first-child
      margin-top: 0

  ul.sidebar-social-links
    display: grid
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr))
    gap: 24px 4px
    padding: 20px 0
    list-style: none
    margin: 0
    
    li
      display: contents
      
    a
      display: flex
      align-items: center
      justify-content: center
      width: 24px
      height: 24px
      transition: opacity 0.2s ease
      
      &:hover
        opacity: 0.7
        
    svg
      width: 22px
      height: 22px

.inner-wrapper
  +flexbox
  +flex-direction(row)
  +align-items(center)
  +justify-content(space-between)
  height: 100%
  margin: 0 auto
  padding: 60px 20px
  max-width: 1300px
  width: 100%

footer
  border-top: 1px solid var(--border-color)
  text-align: center
  width: 100%
  font-size: calc(1rem * var(--footer-text-scale, 1))

  *:not(.footer-custom-content)
    text-transform: #{"{{ theme.nav_text_transform_footer }}"}

  .inner-wrapper
    +flex-direction(column)
    +justify-content(center)
    padding: 60px 36px
    gap: 32px

.footer-custom-content
  color: var(--text-color)
  display: block
  text-align: center
  padding: 20px 0
  font-size: calc(1rem * var(--footer-text-scale, 1))

  img
    display: block
    margin: 20px auto

  a
    text-decoration: underline
    text-underline-offset: 3px

.social_icons
  +flexbox
  gap: 10px
  list-style: none
  margin: 0
  padding: 0
  flex-wrap: wrap
  justify-content: center

  a
    display: flex
    align-items: center
    justify-content: center
    flex-shrink: 0
    width: 30px
    height: 30px

    svg
      fill: currentColor
      height: 22px
      width: 22px

      &.tumblr-icon
        width: 14px
      
      &.reddit-icon,
      &.discord-icon
        width: 24px
        height: 24px

.bigcartel-credit
  +global-font-size(15px)
  display: flex
  align-items: center
  gap: 8px
  outline-offset: 4px
  padding: 2px 0
  text-decoration: none

  &:hover, &:focus
    text-decoration: none

  &__text
    position: relative

  &__lockup
    display: block
    fill: currentColor
    padding-top: 1px
    width: 86px

.errors
  border-radius: var(--border-radius)
  background: var(--error-background-color)
  color: var(--error-text-color)
  list-style: none
  margin-bottom: 24px
  padding: 12px 16px

button, input, textarea, select
  border-radius: var(--border-radius)
  height: 50px
  padding: 0

textarea
  height: auto

input, textarea
  background: var(--background-color)
  border: 1px solid var(--text-color)
  color: var(--text-color)
  padding: 8px 10px

button.button, a.button
  +transition(background .2s ease)
  background-color: var(--button-background-color)
  border-radius: var(--border-radius)
  color: var(--button-text-color)
  display: flex
  align-items: center
  justify-content: center
  white-space: pre-wrap
  min-height: 54px
  padding: 16px
  font-family: var(--secondary-font)
  text-align: center
  text-decoration: none

  &.minimal-button
    background: none
    color: var(--text-color)
    min-height: 0
    padding: 0
    text-decoration: none

    &:not(:disabled):hover, &:not(:disabled):active, &:not(:disabled):focus
      +transform(none)
      box-shadow: none
      background: none
      color: var(--hover-color)
      text-decoration: none

  &:hover, &:focus
    background-color: var(--button-background-hover-color)

  &:disabled, &.disabled
    background-color: var(--button-background-color) !important
    cursor: not-allowed
    opacity: .4

  &--centered
    margin: 0 auto
    max-width: 300px

.select
  border-radius: var(--border-radius)
  position: relative
  border: 1px solid var(--secondary-text-color)
  color: var(--secondary-text-color)
  height: 50px
  margin-bottom: 15px
  padding: 0
  position: relative
  max-width: 80%
  width: 100%

  select
    background: none
    border: 0
    height: 100%
    padding: 0 40px 0 12px
    position: relative
    width: 100%
    z-index: 2

    option
      background-color: #FFF
      color: #000

    &:focus
      box-shadow: none

    &::-ms-expand
      display: none

  svg
    fill: currentColor
    height: 8px
    position: absolute
    pointer-events: none
    right: 14px
    top: 50%
    transform: translateY(-50%)
    width: 14px
    z-index: 1

.sr-only
  border: 0
  clip: rect(0 0 0 0)
  height: 1px
  margin: -1px
  overflow: hidden
  padding: 0
  position: absolute
  width: 1px

.blur-up
  opacity: 0

  &.lazyloaded
    opacity: 1

.alert-message
  font-weight: normal

  a
    text-decoration: underline
    text-underline-offset: 4px

.visually-hidden
  position: absolute
  width: 1px
  height: 1px
  padding: 0
  margin: -1px
  overflow: hidden
  clip: rect(0, 0, 0, 0)
  white-space: nowrap
  border: 0
